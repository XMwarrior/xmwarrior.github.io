<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ajax内存泄漏示例</title>
  </head>

  <body>
    <button id="btn">请求图片</button>
    <script src="../../js/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        // //   内存缓慢溢出
        // var getImage = function () {
        //   $.ajax({
        //     url: "https://cpwebassets.codepen.io/assets/settings/algolia-9e1c0c887f4db420704b2a79926864019ef156bcecc9d5774a7e4eaa731fc5b5.svg",
        //     success: function (result) {
        //       result;
        //     },
        //     //   complete: function (xhr) {
        //     //     xhr = null;
        //     //   }
        //   });
        //   return false;
        // };
        // //   $("#btn").on("click", getImage);
        // $("#btn").on("click", function (e) {
        //   getImage();
        //   return false; // event.stopPropagation()、event.preventDefault()、打断执行
        // });
        // // 内存缓慢溢出
        // $("#btn").on("click", function () {
        //   $.ajax({
        //     url: "https://cpwebassets.codepen.io/assets/settings/algolia-9e1c0c887f4db420704b2a79926864019ef156bcecc9d5774a7e4eaa731fc5b5.svg",
        //     success: function (result) {
        //       result;
        //     },
        //     //   complete: function (xhr) {
        //     //     xhr = null;
        //     //   }
        //   });
        // });
        // 内存溢出轻微
        var interval = setInterval(function () {
          $.ajax({
            url: "https://cpwebassets.codepen.io/assets/settings/algolia-9e1c0c887f4db420704b2a79926864019ef156bcecc9d5774a7e4eaa731fc5b5.svg",
            success: function (result) {
              result;
            },
          });
        }, 200);
        // var timeout = setTimeout(() => {
        //   clearInterval(interval);
        //   interval = null;
        // }, 2000);
        // // 内存溢出轻微
        // var interval = setInterval(function () {
        //   $.ajax({
        //     url: "https://cpwebassets.codepen.io/assets/settings/algolia-9e1c0c887f4db420704b2a79926864019ef156bcecc9d5774a7e4eaa731fc5b5.svg",
        //     success: function (result) {
        //       result;
        //     },
        //     complete: function (xhr) {
        //       xhr = null;
        //     },
        //   });
        // }, 200);
      });
    </script>
  </body>
</html>
